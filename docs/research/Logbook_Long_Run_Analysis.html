<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Logbook Long Run Analysis – Christopher Antwi</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-e31584831b205ffbb2d98406f31c2a5b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="../site_libs/datatables-binding-0.34.0/datatables.js"></script>

<script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

<link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

<script src="../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>

<link href="../site_libs/dt-ext-scroller-1.13.6/css/scroller.dataTables.min.css" rel="stylesheet">

<script src="../site_libs/dt-ext-scroller-1.13.6/js/dataTables.scroller.min.js"></script>

<script src="../site_libs/jszip-1.13.6/jszip.min.js"></script>

<link href="../site_libs/dt-ext-buttons-1.13.6/css/buttons.dataTables.min.css" rel="stylesheet">

<script src="../site_libs/dt-ext-buttons-1.13.6/js/dataTables.buttons.min.js"></script>

<script src="../site_libs/dt-ext-buttons-1.13.6/js/buttons.html5.min.js"></script>

<script src="../site_libs/dt-ext-buttons-1.13.6/js/buttons.colVis.min.js"></script>

<script src="../site_libs/dt-ext-buttons-1.13.6/js/buttons.print.min.js"></script>

<link href="../site_libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">

<script src="../site_libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>

<link href="../site_libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">

<script src="../site_libs/selectize-0.12.0/selectize.min.js"></script>

<link href="../site_libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">

<script src="../site_libs/crosstalk-1.2.2/js/crosstalk.min.js"></script>



<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Christopher Antwi</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Papers.html"> 
<span class="menu-text">Papers</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Notes.html"> 
<span class="menu-text">Notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../CV.html"> 
<span class="menu-text">CV</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#breakdown-whats-in-the-logbook" id="toc-breakdown-whats-in-the-logbook" class="nav-link active" data-scroll-target="#breakdown-whats-in-the-logbook">Breakdown: What’s In The LogBook?</a>
  <ul class="collapse">
  <li><a href="#tablet-input-materials" id="toc-tablet-input-materials" class="nav-link" data-scroll-target="#tablet-input-materials">Tablet Input Materials</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Logbook Long Run Analysis</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>The Logbook Long Run Days was included as an optional portion of the data that was included as an online appendix. This excel file consists of 6 different sheets, one for each day of the study ( 1-12-18 - 1-17-18), which each contain a daily log of important events for each of the operations. They provided this file to help contextualize unexpected events or patterns that can be observed in the data.</p>
<section id="breakdown-whats-in-the-logbook" class="level2">
<h2 class="anchored" data-anchor-id="breakdown-whats-in-the-logbook">Breakdown: What’s In The LogBook?</h2>
<p>This logbook was utilized as the medium in which operators recorded notes on important events for each of the operations if/when they occurred. The operators are instructed to fill out the logbook daily as follows:</p>
<p><em>Guidelines of Events to be Captured</em> (What Types of Events Should Be Recorded?)</p>
<ul>
<li><p>Major Alarms/Events</p></li>
<li><p>Diversions</p></li>
<li><p>Major Shifts in Trend</p></li>
<li><p>PAT Concerns from Mano</p></li>
<li><p>Note WHEN and WHAT type of Cleaning</p></li>
<li><p>Interventions</p></li>
<li><p>Noticeable Changes When Changing Lots of Raw Material</p></li>
<li><p>New Lot Numbers Added (NPI)</p></li>
</ul>
<p><em>To-Do</em></p>
<ul>
<li><p>Add Context and Interpretation Where Possible For Future Analysis by Others NOT on The Floor</p></li>
<li><p>Send Daily Updates</p></li>
<li><p>Video Walkdown from the Process for the CDC-50 from the Raw Material Perspective</p></li>
</ul>
<p>They are instructed to use these guidelines to complete the tables located on the daily sheet, which are separated into two distinct tables.</p>
<p>Due to the tables being split, I had to perform a small amount of spreadsheet engineering. I did this by splitting the daily sheet into two distinct tables so they could be handled separately prior to being handled together.</p>
<p>Due to the format of the log book <em>(which is presumed to have been designed for use and not integration)</em>, I created individual workbooks for each day and split the two tables, which I labeled <strong>Critical Process Parameters (CPP)</strong> &amp; <strong>Critical Quality Attributes (CQA)</strong>, into separate sheets. I do plan on changing the names of these workbooks when I find a better name as those aren’t exactly what those sheets are. Below is a zoomed in example of the original formats for CPP &amp; CQA followed directly by the updated formats.</p>
<p>After preprocessing the log books, I then loaded the 6 Workbooks (12 Total Sheets) into R. Here I consolidated these files into a single data frame which I “flattened” which was used to create Long_Logbook_Data which I plan to use as the corpus in my analysis.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-15a515273e6f858dff89" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-15a515273e6f858dff89">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"48\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"12\" data-max=\"17\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Scroller","Buttons"],"data":[["08:30:00","08:30:00","09:00:00","10:00:00","11:30:00","12:30:00","13:00:00","13:30:00","14:30:00","14:30:00","15:00:00","15:00:00","15:00:00","15:30:00","16:00:00","19:00:00","19:00:00","11:00:00","12:30:00","13:30:00","14:30:00","15:30:00","16:00:00","16:00:00","17:00:00","17:00:00","20:00:00","00:00:00","02:00:00","02:00:00","03:00:00","04:30:00","05:00:00","08:00:00","09:30:00","10:00:00","10:00:00","10:30:00","13:00:00","13:30:00","15:00:00","16:30:00","16:30:00","17:30:00","17:30:00","18:30:00","19:00:00","21:00:00","23:30:00","23:30:00","00:00:00","02:00:00","03:00:00","04:30:00","05:00:00","05:00:00","08:00:00","09:30:00","10:00:00","10:30:00","13:30:00","15:00:00","16:30:00","16:30:00","17:30:00","17:30:00","18:30:00","19:00:00","21:00:00","21:00:00","23:30:00","23:30:00","01:30:00","02:00:00","02:00:00","03:30:00","05:30:00","06:30:00","07:30:00","07:30:00","07:30:00","08:00:00","08:00:00","08:00:00","10:00:00","10:00:00","12:30:00","13:00:00","17:30:00","18:00:00","20:00:00","22:30:00","23:30:00","02:00:00","03:30:00","05:30:00","06:30:00","07:30:00","10:00:00","12:30:00","13:00:00","17:30:00","18:00:00","22:30:00","23:30:00","00:30:00","01:30:00","02:00:00","03:30:00","05:00:00","06:00:00","06:30:00","06:30:00","06:30:00","06:30:00","06:30:00","10:00:00","10:00:00","10:30:00","11:30:00","14:30:00","17:30:00","18:00:00","19:00:00","21:30:00","22:30:00","00:30:00","01:30:00","02:00:00","03:30:00","05:00:00","06:00:00","10:00:00","10:30:00","11:30:00","14:30:00","17:30:00","17:30:00","21:30:00","22:30:00","00:00:00","00:30:00","00:30:00","00:30:00","07:00:00","07:00:00","09:00:00","10:00:00","10:00:00","13:30:00","15:30:00","16:30:00","19:30:00","23:00:00","00:00:00","00:30:00","07:00:00","10:00:00","13:30:00","15:30:00","16:30:00","19:30:00","23:00:00","02:30:00","04:30:00","06:30:00","10:00:00","11:00:00","11:30:00","02:30:00","04:30:00","06:30:00","10:00:00"],[1,1,2,4,7,9,10,11,13,13,14,14,14,15,16,22,22,6,9,11,13,15,16,16,18,18,24,1,5,5,7,10,11,17,20,21,21,22,27,28,31,34,34,36,36,38,39,43,48,48,1,5,7,10,11,11,17,20,21,22,28,31,34,34,36,36,38,39,43,43,48,48,4,5,5,8,12,14,16,16,16,17,17,17,21,21,26,27,36,37,41,46,48,5,8,12,14,16,21,26,27,36,37,46,48,2,4,5,8,11,13,14,14,14,14,14,21,21,22,24,30,36,37,39,44,46,2,4,5,8,11,13,21,22,24,30,36,36,44,46,1,2,2,2,15,15,19,21,21,28,32,34,40,47,1,2,15,21,28,32,34,40,47,6,10,14,21,23,24,6,10,14,21],[12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,17,17],["RTD/PAT","Quality","Quality","Feeding","RTD/PAT","RTD/PAT","RTD/PAT","Feeding","Feeding","RTD/PAT","Feeding","RTD/PAT","Quality","Feeding","Feeding","Feeding","Quality","Electronic Communication","NIR","NIR","Feeders","Electronic Communication","Feeders","tablets","Adjustment","Feeder","RTD","Feeding","RTD/PAT","Quality","RTD/PAT","Feeding","Feeding","RTD/PAT","RTD/PAT","Feeding","Compression","RTD/PAT","Quality","Feeding","Feeding","Feeding","Quality","RTD/PAT","Quality","Feeding","Feeding","Feeding","Feeding","Quality","Cleaning","PAT Error/adjustment","PAT Error/adjustment","Feeders","Adjustment","Feeders","Feeders","Feeders","Cleaning","Feeders","Electronic Communication","Electronic Communication","Cleaning","Feeder","Adjustment","RTD","Electronic Communication","Electronic Communication","Cleaning","Feeder","Feeder","RTD","Compression","Feeding","Compression","Feeding","Feeding","Feeding","Feeding","Blending","Compression","Feeding","Blending","Compression","Feeding","Compression","Feeding","Feeding","Feeding","Feeding","Feeding","Feeding","Feeding","Adjustment","Electronic Communication","Electronic Communication","Electronic Communication","Adjustment","Cleaning","Electronic Communication","Electronic Communication","Cleaning","Electronic Communication","Electronic Communication","Cleaning","Feeding","Feeding","Feeding","Feeding","Feeding","Feeding","Feeding","Blending","Compression","RTD/PAT","Quality","Feeding","Compression","Feeding","Feeding","Feeding","Feeding","RTD/PAT","Feeding","Feeding","Feeding","Electronic Communication","Electronic Communication","Electronic Communication","Cleaning","Cleaning","Electronic Communication","Cleaning","Feeder","Electronic Communication","Electronic Communication","Cleaning","Feeder","Feeder","Electronic Communication","Feeding","Feeding","Compression","Quality","Feeding","Blending","Compression","Feeding","Compression","Feeding","Feeding","Feeding","Feeding","Feeding","Cleaning","RTD","Electronic Communication","Cleaning","Electronic Communication","Electronic Communication","Feeders","Electronic Communication","Electronic Communication","Feeding","Feeding","Feeding","Feeding","Feeding","Feeding","Electronic Communication","Electronic Communication","Electronic Communication","Electronic Communication"],["Blend NIR - Concentration predicting closer to 10% (previous day closer to 11%). Batch was stopped and NIR reject limts changes to reflect new target (+/- 10%) (KM)","Run Start - 8:13 AM - Batch Ref = 20180112_8h7m (PO)","Run restart - 8:43 AM - Batch Ref: 20180112-8h37m using new blend NIR limits (PO)","Avicel PD4 - Communnication alarm resulted in system stop.Same communication error from previous day. System reset and restarted.(PO)","Blend NIR - Spike in prediction coincides with the scraping of the probe. Also an avicel drum change was made. Evaluate if shift coincides with Drum change.(PO)","Blend NIR - noticable peak in Api concentration- Evaluate if due to buildup of PAI on outlet of screw feeder (PD3) and then falling into feeder manifold- not confirmed (PO)","Blend NIR - appearace of concentration drift from the start of campaign 10.4% to 10.7% over 45 min time period.Noticed that RTD and Api feeder do not reflect change. (PO)","Avicel PD4 - Vacuum hopper ran empty due to void in bulk created by vacuum wand. Poor flow of material did not fill void. Process Stopped. Redistributed material in drum and restart system- issue resolved- (KM)","Avicel PD4 - Communnication alarm resulted in process stop.Same communication error from previous day. System reset and restarted.(PO)","Ejection force high- System Paused but not evidenceof high ejection force. Restarted, no further issue. (AT)","Avicel PD4&amp; PD1- Vacuum hopper ran empty due to void in bulk created by vacuum wand. Poor flow of material did not fill void. Process stopped. Root cause unknown for PD1 (possible blinding of the sensor in the hopper).Redistributed material in drum and restart system- issue resolved- (AT)","Tablet hardness trending high- compression force was reducing to compensate from 8.0 kp to 7.2 kp. New limits were rquired to be set for force to reflect change. (AT)","Blend NIR Step change- Attempted to update limits to reflect offset in prediction. Restarted SynTQ orchestration, which resulted in reinitialization and scraping the probe clean of powder. Blend NIR concentration took a step change down down to ~ 10.1 (AT)","Material buildup Mag St PD7 - Noticed some material buildup on outlet of PD7. This may be due to airflow having no where to go from blender 2 and resulting I dust kicking back up towards the feeder. (AT)","APAP Feeder Motor speed- Noticed that there was a disturbance registered by RTD.  The screw speed drifted to 9000 rpm, then drifted back to normal range (~6500 rpm for 235:1 GR). Paused Run, decision was made to swap out motor for a 63:1. Wet clean was also performed to remove hardened material from the tip of the screws. Restarted Run. Resulting motor speed is now ~1500. Motor current error occured. wet cleaned screws and barrel, then restarted and process ran fine for a few minutes until motor error occured again. Screen was changed from 2mm to 8 mm after noticing material was getting clogged in the 2mm screen.(AT)","APAP feeder disturbance (PD3)- Feeder disturbance resulted in diversion event a the press. It was determined that the wrong parameters were uploaded to the feeder after restarting because the CDC recipes that were loaded were not in memory. After correcting the parameters the feeder regained control and process began to make good tablets again.- issue resolved (AT)","Diversion Event by RTD- see notes on feeding column (AT)","Avicel","Blend","Blend","Avicel PD4 Bulk","Avicel PD4","Avicel PD4 and PD1 Bulk","Hardness","Swapped out motor and screen","APAP","Diversion","Feeder Manifold Dedusting - System paused to remove excess buildup from feeder outlets- Restarted at 00:24hrs (AG)","NIR probe referencing error - Probe retracted from process for calibration and was not able to reinsert itself due to loss of a bolt (wing nut). Reuslting calibration was incorrect and resulted in a step change of NIR prediction to 22% from 10%. Prediction outside of limits resulted in rejection event until next rereferencing (1 hr frequency)- SA","Rejection Event - See NIR Probe referenceing error in RTD/PAT notes","SynTQ failure- Probe Retraction/insertionmotor was reset in place. Model limts were increased to allow CDC to restart given the faulty calibration from prior event, but model not active. Restart was not possible without remiving prediction. Process started without NIR prediction untilAM support available. (SA)","Excess powder builup in feeder manifold - APAP feeder (PD3) mesh was changed back to 2 mm to reduce buildup that was occuring from use of 8 mm mesh. This resulted in current alarm with system stop as previously oserved. It was determined that the the new Gear ratio does not have the torque required to overcome the back pressure created by the screen and hence the current was too high. Continued operating near the upper limit of current- (SA)","APAP (PD3) current alarm - System Stop. Went back to 8mm mesh. Current back to normal level-issue resolved (SA)","PAT probe back online - Probe was found stuck in calibration position due to wing nut missing. Found wing nut and reinserted probe manually. PAT back online with accurate predictions - Issue resolved (KM)","PAT retraction/insertion motor failed- predictions reurn to 22%. After reinserting the probe manually the predictions are back to expected values.- issue resolved (PO)","Pit stop (Cleaned feeder barrel) - Powder buildup  cleared  -(PO)","Pit Stop Dry clean ECM - There was no requirement driving the decision to clean (system did not shut down) but powder was starting to fall out of the ECM. (KM)","PAT retraction/insertion motor failed- probe stuck in retract postion after routine scraping. Appears step motor is failing, also possible there is some misalignment of the probe with the housing. (PO)","Batch 3 started","Crosscarm feeder (PD5)- communication error ( same as prior communication error) Feeder reset and system restart (AT)","Avicel feeder (PD1)- communication error ( same as prior communication error) Feeder reset and system restart (AT)","Feeder barrel cleaning- Manifold into blender 1  was cleaned to ensure no bridging. Accidentally brushed feeer barrel and triggered disturbance (AT)","RTD Rejection -  triggered by brushing the powder from the feeder outlets (AT)","NIR Probe calibration failure - Probe retracted and did not re insert into the process. There may be some mis alignment of the probe houseing coupled with the motor failing. Probe was manually inserted, but new predictions are biased at new value. All feeders show operation at expected flow rates. Probe limits set very high to not falsly reject material (AT)","RTD Rejection after restart  - Process  paused to evaluate the NIR probe insertion error. No evidence of actual disturbance by the feeders. There may be a software communication eror between SynTQ and the Press resulting in RTD continuing to process false dtaa during the system pause. (AT)","Lactose feeder (PD1)- communication error ( same as prior communication error) Feeder reset and system restart (AT)","Crosscarm PD4 - Vacuum hopper ran empty due to void in bulk created by vacuum wand. Poor flow of material did not fill void. Redistributed material in drum and restart system- issue resolved- (AT)","Mag St feeder cleaning  - Noticed feeder was remaining in volumeric modefor extended aount of time after refill.  Paused the process to vacuum the buildup around feeder outlet. Restarted system returned to gravimetric operation- issue resolved (AT)","APAP Feeder Stopped - Tablets Rejected for low potency until back into specification. Apparently the feeder massflow dipped to -8 kg/hr with not change in screw speed.(AG)","RTD Rejection- After  negative APAP disturbance entered the system (AG)","Feeder outlets in blender 1 entrance","Verify any stops","Verify any stops","APAP","change of outlet mesh","APAP","verify any stops","verify any stops","Pit stop","verify any stops","crosscarm PD5","Avicel PD1","Cleaning of feeders entering blender 1","Rejection","NIR","Rejection","Lactose PD1","AcDiSol PD5","MgSt","Mgst","APAP","rejection","Tablet Press - Noticed that Tablet Chute actuator was getting hot +/- 57 °C (AG)","Lactose Refill failing- 3 x Over the period of 20 min the lacotse refill was empty and material not getting into the feeder. This resulted in a few short stops, which the system automatically started again. Possible blinding of the top up level sensor, knocked the side of the hopper and then restarted the process(AT)","Punch Lubrication Status - Process paused to check status of punch lubrication. Blender 1 &amp; 2 inlet ports vacuumed during pause (AG)","Avicel PD4 Communication error - Process stopped. Acknowledged and restarted (AG)","Avicel PD4 Communication error - Process Paused. Acknowledged and restarted (AG)","Avicel PD4 Communication error - Process Paused. Acknowledged and restarted (AG)","HMI running too slow - System paused and restarted","HMI running too slow - System paused and restarted","HMI running too slow - System paused and restarted","Increase throuhput - from 50 kg/hr to  55 kg/hr and press speed from 53 RPM to 58 RPM. Changes were made in manual as the system does not allow manual changes within a campaign.","Increase throuhput - from 50 kg/hr to  55 kg/hr and press speed from 53 RPM to 58 RPM. Changes were made in manual as the system does not allow manual changes within a campaign.","Increase throuhput - from 50 kg/hr to  55 kg/hr and press speed from 53 RPM to 58 RPM. Changes were made in manual as the system does not allow manual changes within a campaign.","Pit Stop - Vacuum feeder barrels, API bellows btwn top and feeder. (KM)","Pit Stop - Vacuum ECM","Avicel PD4 Communication error - Process Stopped. Acknowledged and restarted (AG)","Lactose PD2 Communication error - Process Stopped. Acknowledged and restarted (AG)","Feeder manifold dedusting - Process Paused to clean the manifold into B1. Some bridging observed btwn PD3 &amp; PD4 (AT)","Avicel PD4 Communication error - Process Stopped. Acknowledged and restarted (AT)\r\nMgSt incompete refill- top up was full, but material was not filling the refill bucket. Knocking the side of the hopper promoted the materialto flow into the refill. (AT)","Avicel Refill not complete - Top up seemed full but material was not being delivered to the feeder. (AT)","Avicel PD4 Communication error - Process Stopped. Acknowledged and restarted (AT)","Pit Stop - Vacuum B1 feeder manifold,  noticed PD1 had a disturbance due to material build up at outlet into B1 (AG)","Press check","Avicel PD4","Avicel PD4","Avicel PD4","HMI reset","Pit stop","Avicel PD4","Lactose PD2","Feeder outlets in blender 1 entrance","Avicel PD4","Avicel PD4","Pit stop (Feeder Manifold)","Crosscarm PD5 Communication error - Process Stopped. Acknowledged and restarted (AT)","Avicel PD4 Communication error - Process Stopped. Upon restart did not acknowledge the alarm and the system alarmed and stopped due to \"mass flow stabilization failure\"Acknowledged and restarted (AG)","Avicel PD2 Communication error - Process Stopped. Acknowledged and restarted (AG)","Pit Stop - Vacuum B1 &amp; B2 feeder Manifolds. (AG)","Pit Stop - Vacuum B1 &amp; B2 feeder Manifolds. Prior to pit stop it was noticed that PD1 was showing disturbances. Pulled back feeder and saw there was no bridging, but powder beneath the feeder barren and the manifold. (AG)","Crosscarm PD5 Communication error - Process Stopped. Acknowledged and restarted (AT)","Totalizer info lost for entire campaign - due to software glitch on the lab CDC. Campaign totals restarted and reset to zero. Feeders stopped at 1048576.000g at slightly diferent times. Progress can still be traced through Mag St Total and or qty API dispensed. This issue is being worked on for the Cramlington system. (PO)","Totalizer info lost for entire campaign - due to software glitch on the lab CDC. Campaign totals restarted and reset to zero. Feeders stopped at 1048576.000g at slightly diferent times. Progress can still be traced through Mag St Total and or qty API dispensed. This issue is being worked on for the Cramlington system. (PO)","Totalizer info lost for entire campaign - due to software glitch on the lab CDC. Campaign totals restarted and reset to zero. Feeders stopped at 1048576.000g at slightly diferent times. Progress can still be traced through Mag St Total and or qty API dispensed. This issue is being worked on for the Cramlington system. (PO)","Totalizer info lost for entire campaign - due to software glitch on the lab CDC. Campaign totals restarted and reset to zero. Feeders stopped at 1048576.000g at slightly diferent times. Progress can still be traced through Mag St Total and or qty API dispensed. This issue is being worked on for the Cramlington system. (PO)","Totalizer info lost for entire campaign - due to software glitch on the lab CDC. Campaign totals restarted and reset to zero. Feeders stopped at 1048576.000g at slightly diferent times. Progress can still be traced through Mag St Total and or qty API dispensed. This issue is being worked on for the Cramlington system. (PO)","Pit Stop - Vacuum feeders (KM)","Pit Stop - Vacuum ECM","New Lot of Avicel in PD4 (Lot 71732C)- Observed change step change of feed factor (PO)","Crosscarm PD5 Communication error - Process Stopped. Acknowledged and restarted (PO)\r\nAvicel PD4 Communication error - Process Stopped. Acknowledged and restarted-(KM) \r\nNOTE:Copper connections changed to gold on the MSD system, so do not expect the same issues) (PO)","Lactose PD2 Communication error - Process Stopped. Acknowledged and restarted (AT)","PD3 Drift of screw speed and feed factor - Paused the process to clean the feeder manifold of B1. After restart, an accidental disturbance during cleaning resulted in  PD4 and PD5 thinking it was empty and refilled and overfilled. Process paused. Excess had tp be vacuumed. (AT)","RTD Spike after restart- Similar to previous Spike after restart, there is no evidence it is real and related to a software glitch (AT)","Crosscarm PD5 Vacuum cycle time -Level sensor in the top up was not being triggered after a draw from the bulk, suggesting more material needed to be vacuumed to trigger the level sensor. Increased time to 45 seconds. (AT)","PD3 Drift of screw speed and feed factor - Attempted to brush off material from end of feeder barrel without pausing. (AT)","Avicel PD2 Communication error - Process Stopped. Acknowledged and restarted (AG)","Crosscarm PD5","Avicel PD4","Lactose PD2","Feeder manifolds","Feder Manifolds","Crosscarm PD5","Pit stop","Avicel PD4","Avicel PD4 &amp; Crosscarm PD5","Lactose PD2","B1 Manifold","APAP","APAP Screwspeed","Avicel","Pit Stop - Vacuum B1 &amp; B2 inlet port (AG)","Feeder Overfilled- After pitstop feeder unstable massflow folowed the overfill. (AG)","Press not starting- Door sensor found loose and taped. Isssue resolved Process started (AG)","Blend Potency OOS- after resuming from pit stop OOS occurred. Same issue seen 2 oher instances. (AG)","Avicel PD2 Communication error - Process Stopped. Acknowledged and restarted (PO)","Throughput change to 55 kg/hr","Compression Force Compensator - Read/Write difference. Happened 3 consecutive times. Manual change of setpoint fixed the issue. -issue resolved(KM)","Pit Stop - Vacuum B1 &amp; B2 inlet port (AT)","Pit Stop - Vacuum the ECM (AT)","Avicel PD4 Communication error - Process Stopped. Acknowledged and restarted (AT)","Avicel PD2 Communication error - Process Stopped. Acknowledged and restarted (AT)","Lactose Refill failing- Over the period of 16:12 - 16:39 the lacotse refill was empty and material not getting into the feeder. This resulted in a few short stops, which the system automatically started again one one of them. Possible blinding of the top up level sensor, knocked the side of the hopper and then restarted the process(AT)","Avicel PD1 Communication error - Process Stopped. Acknowledged and restarted (AT)","Lactose PD2 Communication error - Process Stopped. Acknowledged and restarted (AG)","B1 &amp; B2","Drift after stop","Avcicel PD2","Pit Stop","Avcicel PD4","Avicel PD2 Communication error - Process Stopped. Acknowledged and restarted (AT)","Lactose Refill Failure","Avicel PD1","Lactose PD 2","Avicel PD4 Communication error - Process Stopped. Acknowledged and restarted (AG)","Crosscarm PD5 Communication error - Process Stopped. Acknowledged and restarted (AG)","Avicel PD4 Communication error - Process Stopped. Acknowledged and restarted (KM)\r\nCrosscarm PD5 Communication error - Process Stopped. Acknowledged and restarted (KM)\r\n","Avicel PD2 Communication error - Process Stopped. Acknowledged and restarted (AG)","Batch Complete","LHP found to have Broken seal","Avicel PD4","Crosscarm PD5","Avicel  PD4/Crosscarm PD5","Avicel PD2"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Observations:<\/th>\n      <th>Time Index<\/th>\n      <th>Date<\/th>\n      <th>Operation<\/th>\n      <th>note<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"Bfrtip","buttons":["copy","csv","excel"],"deferRender":true,"scrollX":true,"scrollY":"600px","pagelength":15,"lengthMenu":[10,15,25,50,100],"columnDefs":[{"className":"dt-right","targets":[1,2]},{"name":"Observations:","targets":0},{"name":"Time Index","targets":1},{"name":"Date","targets":2},{"name":"Operation","targets":3},{"name":"note","targets":4}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Based on this I identified 173 “Exogenous” Interruptions with the Operation <strong>Feeding</strong> consisting of 44.5% of the failure instances, with most of the comments in this stage referencing <strong>APAP</strong> or <strong>Acetaminophen</strong> commonly known as <strong>Tylenol</strong>. I don’t believe a sentiment analysis would be appropriate for this type of analysis as it should be utilized to identify or interpret the emotional tone of the expressed text. I will explore how the <strong>Failure Mode and Effects Analysis (FMEA)</strong> methodology can be utilized to control the overall process. With almost half of the failure instances occurring or being related to <strong>LiW Feeders</strong>, I have began to think about the process overall, if the <strong>LiW Feeders</strong> can be controlled, can the overall process be controlled? <strong>I am not entire surely how to go about conducting this analysis and was hoping to get help or feedback that could point me in the right direction?</strong> I will begin by looking deeper into the <strong>LiW Feeders</strong>, first into the Endogenuous Interruptions identified by <strong>(Shao et al.&nbsp;2025)</strong> to see what could have potentially caused the machine to stop or go out of control.</p>
<p>Based on the figures from <strong>LiW Feeder 1</strong> &amp; <strong>LiW Feeder 5</strong></p>
<p>At first glance, this depicts a major drop on January 15th and from the log book we can begin to tell the story that</p>
<p>at 5 AM: <em>Pit Stop -Vacuum B1 &amp; B2 feeder Manifolds. Prior to pit stop it was noticed that PD1 was showing disturbances. Pulled back feeder and saw there was no bridging, but powder beneath the feeder barren and the manifold. (AG)</em></p>
<p>So, we can see they were able to identify an issue based on “disturbances” and intiated a stop to vacuum the material out of the feeder, which explains the total drop in mass.</p>
<p>and they believed to have gotten the situation under control later to deal with a subsequent interruption</p>
<p>at 6:30 AM: <em>Totalizer info lost for entire campaign - due to software glitch on the lab CDC. Campaign totals restarted and reset to zero. Feeders stopped at 1048576.000g at slightly diferent times. Progress can still be traced through Mag St Total and or qty API dispensed. This issue is being worked on for the Cramlington system. (PO)</em></p>
<p>Here they lost their Totalizer information due to a system error but are using Mag St &amp; the amount of APAPP dispense to give them a trusted estimate.</p>
<p>As you can see there is a time cascading effect, if there is not enough mass coming from <strong>LiW Feeder 1</strong>, <strong>LiW Feeder 5</strong> will be the recipient of the lower mass flowing through the entire CDC and as a result the tablet compression system has to operate slower which in theory is reducing capacity as the entire rig is supposed to be continuous.</p>
<section id="tablet-input-materials" class="level3">
<h3 class="anchored" data-anchor-id="tablet-input-materials">Tablet Input Materials</h3>
<ul>
<li><p>Active Pharmaceutical Ingredient (API): <strong>Acetaminophen</strong> AKA <strong>Tylenol</strong></p>
<p>The chemical compound responsible for producing the intended pharmacological effect in the person. During compression API must be uniformly distributed within the powder blend to ensure does uniformity and consistent potency in every tablet.</p></li>
<li><p>Diluents: <strong>Microcrystalline Ceullulose</strong> &amp; <strong>Anhydrous Dicalcium Phosphate</strong></p>
<p>Diluents increase the bulk of the formulation so the tablet reaches a practical size for handling and compression. They can also improve the flow of powder, compressibility and strength of tablet</p></li>
<li><p>Disintegrants: <strong>Crosarmellose Sodium</strong></p>
<p>Disintegrants ensure that the tablet rapidly breads apart after ingestion so the API can dissolve and be absorbed by creating internal stresses when exposed to gastrointestinal fluids causing the tablet to grow and rupture,</p></li>
<li><p>Lubricants: <strong>Magnesium Stearate</strong> &amp; <strong>Sodium Stearyl Fumarate</strong></p>
<p>Lubricants will reduce friction between the powder and metal surfaces of the die wall and punches. Essentially helps it flow through the process by preventing sticking, reducing ejection force and protects the tooling itself from wear and tear.</p></li>
</ul>
<p>LiW Feeder 1 <strong>Microcrystalline Cellulose (Diluent) Lot No.&nbsp;71734C &amp; Avicel PH102 () Lot No.&nbsp;71732C</strong></p>
<p>LiW Feeder 2 <strong>Spray-Dried Lactose, Fast Flo 316 (Diluent) Lot No.&nbsp;637517L052</strong></p>
<p>LiW Feeder 3 <strong>Active Pharmaceutical Ingredient (API) Acetaminophen Powder, APAP_P Tylenol</strong></p>
<p>LiW Feeder 4 <strong>Microcrystalline Cellulose Lot No.&nbsp;71734C &amp; Avicel PH102 (Diluent) &amp; Lot No.&nbsp;71732C</strong></p>
<p>LiW Feeder 5 <strong>Sodium Croscarmellose, Ac-di-sol SD-711 (Disintegrant) Lot No.&nbsp;T1726C</strong></p>
<p>LiW Feeder 7 <strong>Magnesium Stearate, Ligamed MF-2-V (Lubricant) Lot No.&nbsp;31400041</strong></p>
<p>I am also exploring the <strong>Supervisory Control Theory (SCT)</strong>, which models the system as a set of discrete events and automatically generates a supervisor that ensures safe and correct operation. I will continue to explore through the <strong>AutoFactory</strong> <em>(Boudribila, Tajer, and Boulghasoul 2025)</em> dataset, an open-access resource that includes manually written requirement specifications. Which I believe is the correct method, by training the Model/AI with requirement specifications you should be able to rely and incorporate this “supervisory” module/software as it will have knowledge and continue to learn more about the process. <strong>AutoFactory</strong> enables the extraction and classification of components such as actuators, preactuators, <strong>sensors</strong>, and <strong>control commands</strong>. It provides the necessary foundation for training AI models to understand control logic from natural langauge descriptions, which right now is text from the operator logbook. I believe that even revising the structure/format of the logbook would improve the overall process. Right now the logbook is hard to read as it is not very user friendly, the logbook is defaulted to scroll to the next day which makes sense for the operators entering in information. Minor adjustments to the LogBook should include all input fields fit on a single page/screen, standardized inputs with only a single freeform field text would be beneficial to both the system and the module as it would reduce the amount for potentially both the Autofactory and Operator on site. Autofactory would learn more about the system failures, faster based on the reduction of variable inputs. Operators could potentially pick up speed in failure detection and prevention as they would be able to see more information at once, giving them a bigger picture of what has happened prior to them being there. Normally, the person designated as the Control Designer must read the text, identify key components, and define control logic without any automated support. <em>(Boudribila et al.&nbsp;2025)</em> also developed AutoLabel- NER, a local labelling tool designed to ensure data privacy and make the annotation process easier. The tool features a simple interface and can be adapted to various domains by changing the tag definitions, making it suitable for awide range of <em>Named Entity Recognition (NER)</em> tasks.</p>
<p>In comparison to the <em>Interrupted Continuity Paper</em>, they integrated and aligned all the interruptions identified through machine data where they recorded 272 Exogenous stops where 98.5% of the instances occurred in the <strong>Feeding</strong> stage. They identified their <em>Interruptions</em> binary variable through the logbook stoppages that are aligned with machine stoppages. Exogenous <strong>Machine Stoppages</strong> were identified by them as ” key process parameters in machine data such as mass flow measurements and filling shoe speeds”. From here, they determined that <em>Filing Shoe Speed</em> serves as an effective proxy for productivity as it directly affects the overall tablet production throughput (Sinka et al.&nbsp;2009). <strong>Filling shoe speed determines the rate at which powder is fed into die cavities</strong>.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>